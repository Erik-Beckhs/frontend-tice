<div class="animated fadeIn">
    <div class="card card-body mb-1 p-2">
      <div class="row p-3">
        <i class="fa fa-vcard-o fa-2x"></i>
        <span class="h5 pl-1 fw-bold">{{idDriver?'Actualizar Conductor':'Registro de Conductor'}}</span>
      </div>
      <div *ngIf="!idDriver">
        <p for="" class="">
          Para inscribir a un conductor nuevo siga los siguientes pasos:
        </p>
        <ol>
          <li>Registre los datos personales del conductor</li>
          <li>Registre los datos del vehiculo, si se trata de un vehiculo existente seleccionelo</li>
          <li>Genere la tarjeta TICE</li>
        </ol>
        <p><span class="fw-bold">Nota.</span>  Para la generacion de la tarjeta TICE debe llenar todos los campos de manera obligatoria</p>
        <p>Si el conductor ya existiese y desea renovar su tarjeta, debe consultar su existencia en el menu de listado de conductores</p>
      </div>
    </div>
    <mat-horizontal-stepper #stepper linear>
        <mat-step>
          <form ngNativeValidate #fConductor="ngForm">
            <ng-template matStepLabel>Conductor</ng-template>

            <div class="fadeIn animated">
              <div class="row">
                <div class="col-6">
                  <div class="card card-body border">
                  <div class="row pl-3">
                    <i class="fa fa-user-circle fa-2x"></i>
                    <span class="box-title m-b-0 h5 ml-2">Datos Conductor</span>
                  </div>
                      <!--<ngx-qrcode 
                          [elementType]="elementType" 
                          [value] = "value2"
                          cssClass = "aclass"
                          errorCorrectionLevel = "L">
                      </ngx-qrcode>-->

                    <span class="text-muted font-13"> A continuación ingrese información del conductor </span>
                    <hr>
                    <div class="row">
                        <div class="col-sm-12 col-xs-12">

                              <div class="form-group">
                                <label for="codigo">Número de Registro</label>
                                <input readonly type="string" class="form-control" [(ngModel)]="conductor.codigo" name ="codigo"  id="numreg" placeholder="Numero de Registro"> 
                              </div>
                                <div class="row">
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="ci">Documento de Identidad</label>
                                      <input required type="number" [(ngModel)]="conductor.ci" name ="ci" class="form-control" id="ci" placeholder="Documento de identidad">
                                  </div>
                                  </div>
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="expedicion">Lugar de Expedición</label>
                                      <select required name="expedicion" id="expedicion" class="form-control" [(ngModel)]="conductor.expedicion">
                                        <option value="" disabled>Elija una opción</option>
                                        <option *ngFor="let item of expediciones" [value]="item.valor">{{item.valor}}</option>
                                      </select>
                                    </div>
                                  </div>
                                </div>
                                <div class="form-group">
                                    <label for="nombres">Nombres</label>
                                    <input required type="text" class="form-control" [(ngModel)]="conductor.nombres" name="nombres"  id="nombres" placeholder="Nombres">
                                </div>
                                <div class="form-group">
                                    <label for="apellidos">Apellidos</label>
                                    <input required type="text" class="form-control" [(ngModel)]="conductor.apellidos" name="apellidos"  id="apellidos" placeholder="Apeliidos">
                                </div>
                                <div class="row">
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="fnac">Fecha de Nacimiento</label>
                                      <input required type="date" class="form-control" [(ngModel)]="conductor.fnac" name ="fnac"  id="fnac" >
                                  </div>
                                  </div>
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="tsangre">Tipo de Sangre</label>
                                      <select required name="tsangre" id="tsangre" class="form-control" ngModel>
                                        <option value="" disabled>Elija una opciòn</option>
                                        <option *ngFor="let item of tiposangre" [ngValue]="item.value">{{item.name}}</option>
                                      </select>
                                    </div>
                                  </div>
                                </div>
                              <!--<div class="form-group">
                                <label for="exampleInputPassword1">Nacionalidad</label>
                                <select class="form-control" [value]="conductor.nacionalidad" name="nacionalidad" id="">
                                  <option value="">Argentina</option>
                                  <option value="">Brasil</option>
                                  <option value=""></option>
                                </select>
                              </div>-->
                            <div class="form-group">
                              <label for="direccion">Dirección</label>
                              <input required type="text" class="form-control" [(ngModel)]="conductor.direccion" name="direccion"  id="direccion" placeholder="Dirección">
                            </div>
                             <div class="d-flex justify-content-end">
                                <!--<button type="submit" class="form-control" mat-raised-button color="primary"><i class="fa fa-save"></i> Guardar</button>
                                <button type="submit" class="btn btn-inverse waves-effect waves-light">Limpiar</button>-->
                             </div>
                          
                        </div>
                    </div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="card card-body border">
                    <div class="box-title m-b-0 h5">{{conductor.nombres}} {{conductor.apellidos}}</div>
                    <p class="text-muted m-b-0 font-13"> Informacion Adicional </p>
                    <hr>   
          
                    <div class="">
                      <!--<div class="d-flex justify-content-center">
                        <div class="empty-photo">
                        
                        </div>
                      </div>-->
                      <div class="d-flex justify-content-center">
                        <div class="d-flex" style="flex-direction:column;">
                          <img *ngIf="!imageTempUser" [src]="conductor.img | emptyImg" class="w-200">
                          <img *ngIf="imageTempUser" [src]="imageTempUser" class="w-200">
    
                          <input type="file" class="my-2" (change)="onFileChangeUser($event)">
                        </div>
                      </div>

                      <!--<button mat-raised-button color="primary" (click)="updateImage()" [disabled]="!imageLoad"  class="btn px-5 form-control scale"><i class="fa fa-save"></i> Actualizar Imagen</button>-->
                      <div class="mt-2">
                        <div class="form-group">
                          <label for="licencia">Licencia de Conducir</label>
                          <input required type="text" class="form-control" [(ngModel)]="conductor.licencia" name="licencia"  id="licencia" placeholder="Licencia de conducir">
                        </div>
                        <div class="form-group">
                          <label for="sindicato">Sindicato</label>
                          <select required class="form-control" name="sindicato" id="sindicato"ngModel>
                            <option value="" disabled>Elija una opciòn</option>
                            <option *ngFor="let item of sindicatos" [ngValue]="item.id">{{item.nombre}}</option>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="ueducativa">Unidad Educativa</label>
                          <select required class="form-control" ngModel name="ueducativa" id="ueducativa">
                            <option value="" disabled>Elija una opciòn</option>
                            <option *ngFor="let item of ueducativas" [ngValue]="item.id">{{item.nombre}}</option>
                          </select>
                        </div>
                        <div class="row">
                              <div class="col-6">
                               <div class="form-group">
                                  <label for="finscripcion">Fecha de Inscripción</label>
                                  <input readonly type="text" [value]="hoy" class="form-control" name="finscripcion"  id="finscripcion" >
                              </div>
                              </div>
                              <div class="col-6">
                                <div class="form-group">
                                  <label for="categoriacond">Categoria</label>
                                  <select required name="categoria" id="categoria" class="form-control" ngModel>
                                    <option value="" disabled>Elija una opciòn</option>
                                    <option *ngFor="let item of categorias" [ngValue]="item">{{item}}</option>
                                  </select>
                                </div>
                              </div>
                        </div>
                      </div>
                    </div>   
                  </div>
                </div>
              </div>
            </div>

            <div class="d-flex justify-content-end">
              <button mat-raised-button (click)="next1()" [disabled]="fConductor.invalid" color="primary"> Siguiente <i class="fa fa-forward"></i></button>
            </div>

          </form>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Vehiculo</ng-template>

    <div class="animated fadeIn">
      <form ngNativeValidate #fVehiculo="ngForm">
     <div class="row">
      

        <div class="col-7">
          
          <div class="card card-body border">
            <div class="row pl-3">
            <i class="fa fa-car"></i>
            <span class="box-title m-b-0 h5 pl-2">Datos Vehículo</span>
            </div>
            <span class="text-muted font-13"> A continuación ingrese información del vehiculo </span>
            <hr>
            <div class="row">
                <div class="col-sm-12 col-xs-12">
                    
                      <div class="row">
                        <div class="col-6">
                          <div class="form-group">
                            <label for="exampleInputEmail1">Código de Vehículo</label>
                            <input readonly required type="text" class="form-control" [(ngModel)]="vehiculo.codigo" name="codigo" id="exampleInputEmail1" placeholder="Código de Vehículo">
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-group">
                            <label for="exampleInputEmail1">Número de Placa</label>
                            <input required type="text" class="form-control" [(ngModel)]="vehiculo.placa" name="placa" id="exampleInputEmail1" placeholder="Número de Placa">
                        </div>
                      </div>
                      </div>
                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                                <label for="exampleInputEmail1">Póliza</label>
                                <input required type="text" [(ngModel)]="vehiculo.poliza" name="poliza" class="form-control" id="exampleInputEmail1" placeholder="Poliza">
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="procedencia">Procedencia</label>
                              <select required name="procedencia" id="procedencia" class="form-control" ngModel>
                                <option value="" disabled>Elija una opción</option>
                                <option *ngFor="let item of pais" [ngValue]="item">{{item}}</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                              <div class="form-group">
                                <label for="exampleInputEmail1">Chasis</label>
                                <input required type="text" class="form-control" [(ngModel)]="vehiculo.chasis" name="chasis"  id="" placeholder="Chasis">
                            </div>
                            </div>
                            <div class="col-6">
                              <div class="form-group">
                                <label for="color">Color</label>
                                <select required name="color" id="color" class="form-control" ngModel>
                                  <option value="" disabled>Elija una opción</option>
                                  <option *ngFor="let item of colores" [ngValue]="item">{{item}}</option>
                                </select>
                              </div>
                            </div>
                        </div>
                        <!--<div class="form-group">
                            <label for="exampleInputPassword1">Asociación Anterior</label>
                            <select name="" id="" class="form-control">
                                <option value="">Sindicato Eduardo Avaroa</option>
                                <option value="">Sindicato Pedro Domingo Murillo</option>
                                <option value="">Sindicato 24 de Septiembre</option>
                                <option value="">Sindicato 06 de Octubre</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Asociación Actual</label>
                            <select name="" id="" class="form-control">
                                <option value="">Sindicato Eduardo Avaroa</option>
                                <option value="">Sindicato Pedro Domingo Murillo</option>
                                <option value="">Sindicato 24 de Septiembre</option>
                                <option value="">Sindicato 06 de Octubre</option>
                            </select>
                        </div>-->
                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="tipo">Tipo de Servicio</label>
                              <select required name="tipo" id="tipo" class="form-control" ngModel>
                                <option value="" disabled>Elija una opciòn</option>
                                <option *ngFor="let item of tservicios" [ngValue]="item">{{item}}</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                                <label for="cilindrada">Cilindrada</label>
                                <input type="number" [(ngModel)]="vehiculo.cilindrada" name="cilindrada" class="form-control" id="cilindrada" placeholder="Cilindrada">
                            </div>
                          </div>
                        </div>

                     <!--<div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-success waves-effect waves-light m-r-10">Guardar</button>
                        <button type="submit" class="btn btn-inverse waves-effect waves-light">Limpiar</button>
                     </div>-->
                    
              </div>
            </div>
          </div>
        </div>
        <div class="col-5">
          <div class="card card-body border">
              <div class="box-title m-b-0 h5">{{vehiculo.placa}}</div>
              <p class="text-muted m-b-0 font-13"> {{vehiculo.marca}} {{vehiculo.modelo}} </p>
              <hr>
              <div class="row d-flex justify-content-center">
                <img *ngIf="!imageTempVehicle" [src]="vehiculo.img | emptyImg" class="w-200">
                <img *ngIf="imageTempVehicle" [src]="imageTempVehicle" class="w-200">

                <input type="file" class="my-2" (change)="onFileChangeVehicle($event)">
              </div>
              <div class="row mt-2">
                <div class="col-6">
                  <div class="form-group">
                    <label for="marca">Marca</label>
                    <input required type="text" class="form-control" [(ngModel)]="vehiculo.marca" name="marca" id="marca" placeholder="Marca">
                </div>
                </div>
                <div class="col-6">
                  <div class="form-group">
                    <label for="modelo">Modelo</label>
                    <input required type="text" class="form-control" [(ngModel)]="vehiculo.modelo" name="modelo" id="modelo" placeholder="Modelo">
                </div>
                </div>
            </div> 
          </div>
        </div>

  
      </div>
    </form>
    </div>

            <div class="d-flex justify-content-between">
              <button mat-raised-button color="primary" matStepperPrevious><i class="fa fa-backward"></i> Anterior</button>
              <button mat-raised-button color="primary" [disabled]="fVehiculo.invalid" (click)="verificarVehiculo(fVehiculo.value)">Siguiente <i class="fa fa-forward"></i></button>
            </div>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Tarjeta TICE</ng-template>

          <div>
            <div class="d-flex justify-content-center">
              <button mat-raised-button color="accent" (click)="genera(fConductor, fVehiculo)"><i class="fa fa-save"></i> Generar Tarjeta</button>
            </div>
            
              <div *ngIf="card" class="bg-white mx-5">
                <form ngNativeValidate id="formulario">
                <mat-card>
                  <div class="card">
                    <div class="card-header " >
                      <div class="d-flex justify-content-between">
                        <img src="../../../assets/images/bolivia.jpg" alt="" class="w-200 h-150">
                        <div class="d-flex align-items-center">
                          <div>
                            <p class="text-center">CÓDIGO VEHÍCULO</p>
                            <p class="text-center">{{vehiculo.codigo}}</p>
                          </div>
                        </div>
                        <ngx-qrcode 
                          [elementType]="elementType" 
                          [value] = "value"
                          cssClass = "aclass"
                          errorCorrectionLevel = "L">
                      </ngx-qrcode>
                      <div class="d-flex align-items-center">
                        <div>
                          <p class="text-center">PLACA</p>
                          <p class="text-center">{{vehiculo.placa}}</p>
                        </div>
                      </div>
                        <img src="../../../assets/images/logo-policia.jpg" alt="" class="w-200 h-200">
                      </div>
                    <div class="mt-3">
                      <p class="title-card text-center">TARJETA DE IDENTIFICACIÓN DEL CONDUCTOR ESCOLAR</p>
                      <!--<p class="fs-20 text-center">Dirección Nacional de Transito</p>-->
                    </div>
                  </div>
                   <hr>
                   <div class="card-body">
                     <div class="row">
                       <div class="col-4">
                          <div class="d-flex justify-content-center card-photo">
                            <p class="text-center fs-17">
                              <span class="fw-bold">Codigo Cond.:</span>
                              <span class="ml-1">{{conductor.numreg}}</span>
                            </p>
                            <div class="d-flex justify-content-center">
                              <img [src]="imageTempUser" alt="" class="w-200">
                            </div>
                            <p class="text-center fs-17">{{driver.ci}} {{driver.expedicion}}</p>
                         </div>
                       </div>
                       <div class="col-8">
                          <div id="datos-tarjeta" class="p-3">
                            <p > 
                              <span class="fw-bold">Nombres: </span> 
                              <span>{{conductor.nombre}} </span>
                            </p>
                            <p > 
                              <span class="fw-bold">Apellidos: </span> 
                              <span>{{conductor.apellidos}} </span>
                            </p>
                            <p > 
                              <span class="fw-bold">Tipo de Sangre: </span> 
                              <span>{{driver.tsangre | uppercase}} </span>
                            </p>
                            <p > 
                              <span class="fw-bold"> Licencia: </span> 
                              <span>{{conductor.licencia}} </span>
                              <span class="fw-bold ml-4">Categoria: </span> 
                              <span>{{driver.categoria | uppercase}} </span>
                            </p>
                            <p>
                              <span class="fw-bold">Unidad Educativa: </span> 
                              <span>{{driver.ueducativa | ueducativas}}</span>
                            </p>
                            <p>
                              <span class="fw-bold">Tipo de Servicio: </span> 
                              <span>{{vehicle.tipo}}</span>
                            </p>
                            <br>
                          </div>
                          <p class="fw-bold fs-20 text-center">VALIDO DEL {{hoy}} AL {{ffin}}</p>
                       </div>
                    </div>
                   </div>
                  </div>
                 </mat-card>
                </form>

                 <div class="d-flex justify-content-end mt-3">
                  <button mat-raised-button color="warn" class="mx-1"(click)="registrar()" ><i class="fa fa-save"></i> {{idConductor?'Actualizar':'Registrar'}} </button>
                  <button mat-raised-button (click)="imprimir()" color="warn" [disabled]="!registrado" ><i class="fa fa-print"></i> Imprimir</button>
                  <button mat-raised-button color="warn" class="mx-1"><i class="fa fa-plus"></i> Nuevo</button>
                  <button mat-raised-button color="warn" [routerLink]="['/dashboard/consultar']"><i class="fa fa-users"></i> Lista de Conductores</button>
                </div>

              </div>
         
            
          </div>

          <div class="d-flex justify-content-start mt-4">
            <button mat-raised-button (click)="anteriorTice()" color="primary"><i class="fa fa-backward"></i> Anterior </button>

            <!--<button mat-button color="primary" (click)="stepper.reset()">Reset</button>-->
          </div>
        </mat-step>
      </mat-horizontal-stepper>
      
</div>